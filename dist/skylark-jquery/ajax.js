/**
 * skylark-jquery - The skylark plugin library for fully compatible API with jquery.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.6
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./core","skylark-langx/langx"],function(t,r){var n=0;function e(t,r){return""==r?t:(t+"&"+r).replace(/[&?]{1,2}/,"?")}function a(r,n,e,a){return t.isFunction(r)?(a=n,e=r,n=void 0,r=void 0):t.isFunction(n)&&(a=e,e=n,n=void 0),t.isFunction(e)||(a=e,e=void 0),{url:r,data:n,success:e,dataType:a}}t.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(r,n){t.fn[n]=function(t){return this.on(n,t)}}),t.ajaxJSONP=function(a){var i,o,u=new r.Deferred,s=a.jsonpCallback,c=(t.isFunction(s)?s():s)||"jsonp"+ ++n,l=document.createElement("script"),p=window[c],f=function(r){t(l).triggerHandler("error",r||"abort")},d={abort:f};for(var j in a.data)a.url=e(a.url,j+"="+a.data[j]);return t(l).on("load error",function(r,n){clearTimeout(o),t(l).off().remove(),"error"!=r.type&&i?u.resolve(i[0],200,d):u.reject(r),window[c]=p,i&&t.isFunction(p)&&p(i[0]),p=i=void 0}),window[c]=function(){i=arguments},l.src=a.url.replace(/\?(.+)=\?/,"?$1="+c),document.head.appendChild(l),a.timeout>0&&(o=setTimeout(function(){f("timeout")},a.timeout)),u},t.ajaxSettings=r.Xhr.defaultOptions,t.ajaxSettings.xhr=function(){return new window.XMLHttpRequest},t.ajax=function(n,a){if(n?a?a.url=n:a=r.isString(n)?{url:n}:n:a={url:"./"},"jsonp"==a.dataType)return/\?.+=\?/.test(a.url)||(a.url=e(a.url,a.jsonp?a.jsonp+"=?":!1===a.jsonp?"":"callback=?")),t.ajaxJSONP(a);var i=r.Xhr.request(a.url,a);return(i=i.then(function(r,n,e){return t(document).trigger("ajaxSucess"),a.success&&a.success.apply(this,arguments),a.complete&&a.complete.apply(this,arguments),r},function(){t(document).trigger("ajaxError"),a.error&&a.error.apply(this,arguments)})).success=i.done,i.error=i.fail,i.complete=i.always,i},t.get=function(){return t.ajax(a.apply(null,arguments))},t.post=function(){var r=a.apply(null,arguments);return r.type="POST",t.ajax(r)},t.getJSON=function(){var r=a.apply(null,arguments);return r.dataType="json",t.ajax(r)};var i=t.fn.load;function o(t){return function(r,n){"string"!=typeof r&&(n=r,r="*");var e,a=0,i=r.toLowerCase().match(u)||[];if(jQuery.isFunction(n))for(;e=i[a++];)"+"===e[0]?(e=e.slice(1)||"*",(t[e]=t[e]||[]).unshift(n)):(t[e]=t[e]||[]).push(n)}}t.fn.load=function(r,n,e){if("string"!=typeof r&&i)return i.apply(this,arguments);if(!this.length)return this;var o,u=this,s=a(r,n,e),c=s.url&&s.url.split(/\s/),l=s.success;return c&&c.length>1&&(s.url=c[0],o=c[1]),s.success=function(r){u.html(o?t("<div>").html(r.replace(rscript,"")).find(o):r),l&&l.apply(u,arguments)},t.ajax(s),this},t.param=r.Xhr.param;var u=/\S+/g;return t.ajaxPrefilter=o({}),t.ajaxTransport=o({}),t.ajaxSetup=function(t,n){r.mixin(r.Xhr.defaultOptions,t,n)},t.getScript=function(r,n){return t.get(r,void 0,n,"script")},t});
//# sourceMappingURL=sourcemaps/ajax.js.map
