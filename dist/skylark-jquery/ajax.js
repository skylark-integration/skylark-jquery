/**
 * skylark-jquery - The skylark plugin library for fully compatible API with jquery.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.6
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-net-http/Xhr","./core"],function(t,r,n){var e=0;function a(t,r){return""==r?t:(t+"&"+r).replace(/[&?]{1,2}/,"?")}function o(t,r,e,a){return n.isFunction(t)?(a=r,e=t,r=void 0,t=void 0):n.isFunction(r)&&(a=e,e=r,r=void 0),n.isFunction(e)||(a=e,e=void 0),{url:t,data:r,success:e,dataType:a}}n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,r){n.fn[r]=function(t){return this.on(r,t)}}),n.ajaxJSONP=function(r){var o,i,u=new t.Deferred,s=r.jsonpCallback,c=(n.isFunction(s)?s():s)||"jsonp"+ ++e,l=document.createElement("script"),p=window[c],f=function(t){n(l).triggerHandler("error",t||"abort")},d={abort:f};for(var j in r.data)r.url=a(r.url,j+"="+r.data[j]);return n(l).on("load error",function(t,r){clearTimeout(i),n(l).off().remove(),"error"!=t.type&&o?u.resolve(o[0],200,d):u.reject(t),window[c]=p,o&&n.isFunction(p)&&p(o[0]),p=o=void 0}),window[c]=function(){o=arguments},l.src=r.url.replace(/\?(.+)=\?/,"?$1="+c),document.head.appendChild(l),r.timeout>0&&(i=setTimeout(function(){f("timeout")},r.timeout)),u},n.ajaxSettings={processData:!0},n.ajax=function(e,o){if(e?o?o.url=e:o=t.isString(e)?{url:e}:e:o={url:"./"},"jsonp"==(o=t.mixin({},n.ajaxSettings,o)).dataType)return/\?.+=\?/.test(o.url)||(o.url=a(o.url,o.jsonp?o.jsonp+"=?":!1===o.jsonp?"":"callback=?")),n.ajaxJSONP(o);var i=r.request(o.url,o);return(i=i.then(function(t,r,e){return n(document).trigger("ajaxSucess"),o.success&&o.success.apply(this,arguments),o.complete&&o.complete.apply(this,arguments),t},function(){n(document).trigger("ajaxError"),o.error&&o.error.apply(this,arguments)})).success=i.done,i.error=i.fail,i.complete=i.always,i},n.get=function(){return n.ajax(o.apply(null,arguments))},n.post=function(){var t=o.apply(null,arguments);return t.type="POST",n.ajax(t)},n.getJSON=function(){var t=o.apply(null,arguments);return t.dataType="json",n.ajax(t)};var i=n.fn.load;function u(t){return function(r,n){"string"!=typeof r&&(n=r,r="*");var e,a=0,o=r.toLowerCase().match(s)||[];if(jQuery.isFunction(n))for(;e=o[a++];)"+"===e[0]?(e=e.slice(1)||"*",(t[e]=t[e]||[]).unshift(n)):(t[e]=t[e]||[]).push(n)}}n.fn.load=function(t,r,e){if("string"!=typeof t&&i)return i.apply(this,arguments);if(!this.length)return this;var a,u=this,s=o(t,r,e),c=s.url&&s.url.split(/\s/),l=s.success;return c&&c.length>1&&(s.url=c[0],a=c[1]),s.data&&"object"==typeof s.data&&(s.type="POST"),s.success=function(t){u.html(a?n("<div>").html(t.replace(rscript,"")).find(a):t),l&&l.apply(u,arguments)},n.ajax(s),this},n.param=r.param;var s=/\S+/g;return n.ajaxPrefilter=u({}),n.ajaxTransport=u({}),n.ajaxSetup=function(n,e){t.mixin(r.defaultOptions,n,e)},n.getScript=function(t,r){return n.get(t,void 0,r,"script")},n});
//# sourceMappingURL=sourcemaps/ajax.js.map
