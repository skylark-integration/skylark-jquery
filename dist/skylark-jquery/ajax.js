/**
 * skylark-jquery - The skylark plugin library for fully compatible API with jquery.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.6
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./core","skylark-langx/langx"],function(n,r){function t(n,r){return""==r?n:(n+"&"+r).replace(/[&?]{1,2}/,"?")}function e(r,t,e,a){return n.isFunction(r)?(a=t,e=r,t=void 0,r=void 0):n.isFunction(t)&&(a=e,e=t,t=void 0),n.isFunction(e)||(a=e,e=void 0),{url:r,data:t,success:e,dataType:a}}function a(n){return function(r,t){"string"!=typeof r&&(t=r,r="*");var e,a=0,i=r.toLowerCase().match(c)||[];if(jQuery.isFunction(t))for(;e=i[a++];)"+"===e[0]?(e=e.slice(1)||"*",(n[e]=n[e]||[]).unshift(t)):(n[e]=n[e]||[]).push(t)}}var i=0;n.ajaxJSONP=function(e){var a,u,o=new r.Deferred,s=e.jsonpCallback,c=(n.isFunction(s)?s():s)||"jsonp"+ ++i,l=document.createElement("script"),p=window[c],f=function(r){n(l).triggerHandler("error",r||"abort")},d={abort:f};for(var j in e.data)e.url=t(e.url,j+"="+e.data[j]);return n(l).on("load error",function(r,t){clearTimeout(u),n(l).off().remove(),"error"!=r.type&&a?o.resolve(a[0],200,d):o.reject(r),window[c]=p,a&&n.isFunction(p)&&p(a[0]),p=a=void 0}),window[c]=function(){a=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),document.head.appendChild(l),e.timeout>0&&(u=setTimeout(function(){f("timeout")},e.timeout)),o},n.ajaxSettings=r.Xhr.defaultOptions,n.ajaxSettings.xhr=function(){return new window.XMLHttpRequest},n.ajax=function(e){if(e?r.isString(e)&&(e={url:e}):e={url:"./"},"jsonp"==e.dataType){var a=/\?.+=\?/.test(e.url);return a||(e.url=t(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),n.ajaxJSONP(e)}var i=r.Xhr.request(e.url,e);return e.success&&(i=i.then(e.success,e.error)),i},n.get=function(){return n.ajax(e.apply(null,arguments))},n.post=function(){var r=e.apply(null,arguments);return r.type="POST",n.ajax(r)},n.getJSON=function(){var r=e.apply(null,arguments);return r.dataType="json",n.ajax(r)};var u=n.fn.load;n.fn.load=function(r,t,a){if("string"!=typeof r&&u)return u.apply(this,arguments);if(!this.length)return this;var i,o=this,s=e(r,t,a),c=s.url&&s.url.split(/\s/),l=s.success;return c&&c.length>1&&(s.url=c[0],i=c[1]),s.success=function(r){o.html(i?n("<div>").html(r.replace(rscript,"")).find(i):r),l&&l.apply(o,arguments)},n.ajax(s),this},n.param=r.Xhr.param;var o={},s={},c=/\S+/g;return n.ajaxPrefilter=a(o),n.ajaxTransport=a(s),n.ajaxSetup=function(n,t){r.mixin(r.Xhr.defaultOptions,n,t)},n});
//# sourceMappingURL=sourcemaps/ajax.js.map
