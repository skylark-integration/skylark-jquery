/**
 * skylark-jquery - The skylark plugin library for fully compatible API with jquery.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.6
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./core","skylark-langx/langx"],function(n,t){function r(n,t){return""==t?n:(n+"&"+t).replace(/[&?]{1,2}/,"?")}function e(t,r,e,a){return n.isFunction(t)?(a=r,e=t,r=void 0,t=void 0):n.isFunction(r)&&(a=e,e=r,r=void 0),n.isFunction(e)||(a=e,e=void 0),{url:t,data:r,success:e,dataType:a}}function a(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var e,a=0,u=t.toLowerCase().match(s)||[];if(jQuery.isFunction(r))for(;e=u[a++];)"+"===e[0]?(e=e.slice(1)||"*",(n[e]=n[e]||[]).unshift(r)):(n[e]=n[e]||[]).push(r)}}var u=0;n.ajaxJSONP=function(e){var a,i,o=new t.Deferred,s=e.jsonpCallback,c=(n.isFunction(s)?s():s)||"jsonp"+ ++u,l=document.createElement("script"),p=window[c],f=function(t){n(l).triggerHandler("error",t||"abort")},d={abort:f};for(var j in e.data)e.url=r(e.url,j+"="+e.data[j]);return n(l).on("load error",function(t,r){clearTimeout(i),n(l).off().remove(),"error"!=t.type&&a?o.resolve(a[0],200,d):o.reject(t),window[c]=p,a&&n.isFunction(p)&&p(a[0]),p=a=void 0}),window[c]=function(){a=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),document.head.appendChild(l),e.timeout>0&&(i=setTimeout(function(){f("timeout")},e.timeout)),o},n.ajaxSettings=t.Xhr.defaultOptions,n.ajaxSettings.xhr=function(){return new window.XMLHttpRequest},n.ajax=function(e){if("jsonp"==e.dataType){var a=/\?.+=\?/.test(e.url);return a||(e.url=r(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),n.ajaxJSONP(e)}var u=t.Xhr.request(e.url,e);return e.success&&(u=u.then(e.success,e.error)),u},n.get=function(){return n.ajax(e.apply(null,arguments))},n.post=function(){var t=e.apply(null,arguments);return t.type="POST",n.ajax(t)},n.getJSON=function(){var t=e.apply(null,arguments);return t.dataType="json",n.ajax(t)},n.fn.load=function(t,r,a){if(!this.length)return this;var u,i=this,o=e(t,r,a),s=o.url&&o.url.split(/\s/),c=o.success;return s&&s.length>1&&(o.url=s[0],u=s[1]),o.success=function(t){i.html(u?n("<div>").html(t.replace(rscript,"")).find(u):t),c&&c.apply(i,arguments)},n.ajax(o),this},n.param=t.Xhr.param;var i={},o={},s=/\S+/g;return n.ajaxPrefilter=a(i),n.ajaxTransport=a(o),n.ajaxSetup=function(n,r){t.mixin(t.Xhr.defaultOptions,n,r)},n});
//# sourceMappingURL=sourcemaps/ajax.js.map
