/**
 * skylark-jquery - The skylark plugin library for fully compatible API with jquery.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.6
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./core","skylark-langx/langx"],function(r,t){var n=0;function e(r,t){return""==t?r:(r+"&"+t).replace(/[&?]{1,2}/,"?")}function a(t,n,e,a){return r.isFunction(t)?(a=n,e=t,n=void 0,t=void 0):r.isFunction(n)&&(a=e,e=n,n=void 0),r.isFunction(e)||(a=e,e=void 0),{url:t,data:n,success:e,dataType:a}}r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,n){r.fn[n]=function(r){return this.on(n,r)}}),r.ajaxJSONP=function(a){var o,i,u=new t.Deferred,s=a.jsonpCallback,c=(r.isFunction(s)?s():s)||"jsonp"+ ++n,l=document.createElement("script"),p=window[c],f=function(t){r(l).triggerHandler("error",t||"abort")},d={abort:f};for(var j in a.data)a.url=e(a.url,j+"="+a.data[j]);return r(l).on("load error",function(t,n){clearTimeout(i),r(l).off().remove(),"error"!=t.type&&o?u.resolve(o[0],200,d):u.reject(t),window[c]=p,o&&r.isFunction(p)&&p(o[0]),p=o=void 0}),window[c]=function(){o=arguments},l.src=a.url.replace(/\?(.+)=\?/,"?$1="+c),document.head.appendChild(l),a.timeout>0&&(i=setTimeout(function(){f("timeout")},a.timeout)),u},r.ajaxSettings=t.Xhr.defaultOptions,r.ajaxSettings.xhr=function(){return new window.XMLHttpRequest},r.ajax=function(n){if(n?t.isString(n)&&(n={url:n}):n={url:"./"},"jsonp"==n.dataType)return/\?.+=\?/.test(n.url)||(n.url=e(n.url,n.jsonp?n.jsonp+"=?":!1===n.jsonp?"":"callback=?")),r.ajaxJSONP(n);var a=t.Xhr.request(n.url,n);return(a=a.then(function(){r(document).trigger("ajaxSucess"),n.success&&n.sucess.apply(this,arguments)},function(){r(document).trigger("ajaxError"),n.error&&n.error.apply(this,arguments)})).success=a.done,a.error=a.fail,a.complete=a.always,a},r.get=function(){return r.ajax(a.apply(null,arguments))},r.post=function(){var t=a.apply(null,arguments);return t.type="POST",r.ajax(t)},r.getJSON=function(){var t=a.apply(null,arguments);return t.dataType="json",r.ajax(t)};var o=r.fn.load;function i(r){return function(t,n){"string"!=typeof t&&(n=t,t="*");var e,a=0,o=t.toLowerCase().match(u)||[];if(jQuery.isFunction(n))for(;e=o[a++];)"+"===e[0]?(e=e.slice(1)||"*",(r[e]=r[e]||[]).unshift(n)):(r[e]=r[e]||[]).push(n)}}r.fn.load=function(t,n,e){if("string"!=typeof t&&o)return o.apply(this,arguments);if(!this.length)return this;var i,u=this,s=a(t,n,e),c=s.url&&s.url.split(/\s/),l=s.success;return c&&c.length>1&&(s.url=c[0],i=c[1]),s.success=function(t){u.html(i?r("<div>").html(t.replace(rscript,"")).find(i):t),l&&l.apply(u,arguments)},r.ajax(s),this},r.param=t.Xhr.param;var u=/\S+/g;return r.ajaxPrefilter=i({}),r.ajaxTransport=i({}),r.ajaxSetup=function(r,n){t.mixin(t.Xhr.defaultOptions,r,n)},r});
//# sourceMappingURL=sourcemaps/ajax.js.map
