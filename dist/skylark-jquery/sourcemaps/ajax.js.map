{"version":3,"sources":["ajax.js"],"names":["define","$","triggerAndReturn","context","eventName","data","event","Event","trigger","isDefaultPrevented","triggerGlobal","settings","global","document","ajaxStart","active","ajaxStop","ajaxBeforeSend","xhr","beforeSend","call","ajaxSuccess","deferred","status","success","resolveWith","ajaxComplete","ajaxError","error","type","rejectWith","complete","empty","mimeToDataType","mime","split","htmlType","jsonType","scriptTypeRE","test","xmlTypeRE","appendQuery","url","query","replace","serializeData","options","processData","param","traditional","toUpperCase","undefined","parseArguments","dataType","isFunction","serialize","params","obj","scope","array","isArray","hash","isPlainObject","each","key","value","add","name","addToPrefiltersOrTransports","structure","dataTypeExpression","func","i","dataTypes","toLowerCase","match","rnotwhite","jQuery","slice","unshift","push","ajaxExtend","target","src","deep","flatOptions","ajaxSettings","extend","jsonpID","window","rscript","blankRE","originAnchor","createElement","href","location","ajaxJSONP","ajax","responseData","abortTimeout","_callbackName","jsonpCallback","callbackName","script","originalCallback","abort","errorType","triggerHandler","promise","on","e","clearTimeout","off","remove","arguments","head","appendChild","timeout","setTimeout","XMLHttpRequest","accepts","json","xml","html","text","crossDomain","cache","urlAnchor","Deferred","protocol","host","toString","hasPlaceholder","Date","now","jsonp","headers","setHeader","RegExp","$1","nativeSetHeader","setRequestHeader","mimeType","indexOf","overrideMimeType","contentType","onreadystatechange","readyState","result","getResponseHeader","responseText","eval","responseXML","parseJSON","statusText","xhrFields","async","open","username","password","apply","send","get","post","getJSON","fn","load","this","length","selector","self","parts","callback","response","find","escape","encodeURIComponent","join","prefilters","transports","ajaxPrefilter","ajaxTransport","ajaxSetup"],"mappings":"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","file":"../ajax.js","sourcesContent":["define([\n    \"./core\",\n    \"./deferred\"\n], function($) {\n    //     zepto.ajax.js\n    //     (c) 2010-2014 Thomas Fuchs\n    //     Zepto.js may be freely distributed under the MIT license.\n\n    var jsonpID = 0,\n        document = window.document,\n        key,\n        name,\n        rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n        scriptTypeRE = /^(?:text|application)\\/javascript/i,\n        xmlTypeRE = /^(?:text|application)\\/xml/i,\n        jsonType = 'application/json',\n        htmlType = 'text/html',\n        blankRE = /^\\s*$/,\n        originAnchor = document.createElement('a');\n\n    originAnchor.href = window.location.href;\n\n    // trigger a custom event and return false if it was cancelled\n    function triggerAndReturn(context, eventName, data) {\n        var event = $.Event(eventName)\n        $(context).trigger(event, data)\n        return !event.isDefaultPrevented()\n    }\n\n    // trigger an Ajax \"global\" event\n    function triggerGlobal(settings, context, eventName, data) {\n        if (settings.global) return triggerAndReturn(context || document, eventName, data)\n    }\n\n    // Number of active Ajax requests\n    $.active = 0;\n\n    function ajaxStart(settings) {\n        if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n    }\n\n    function ajaxStop(settings) {\n        if (settings.global && !(--$.active)) triggerGlobal(settings, null, 'ajaxStop')\n    }\n\n    // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n    function ajaxBeforeSend(xhr, settings) {\n        var context = settings.context\n        if (settings.beforeSend.call(context, xhr, settings) === false ||\n            triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n            return false\n\n        triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n    }\n\n    function ajaxSuccess(data, xhr, settings, deferred) {\n        var context = settings.context,\n            status = 'success'\n        settings.success.call(context, data, status, xhr)\n        if (deferred) deferred.resolveWith(context, [data, status, xhr])\n        triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n        ajaxComplete(status, xhr, settings)\n    }\n    // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n    function ajaxError(error, type, xhr, settings, deferred) {\n        var context = settings.context\n        settings.error.call(context, xhr, type, error)\n        if (deferred) deferred.rejectWith(context, [xhr, type, error])\n        triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type])\n        ajaxComplete(type, xhr, settings)\n    }\n    // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n    function ajaxComplete(status, xhr, settings) {\n        var context = settings.context\n        settings.complete.call(context, xhr, status)\n        triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n        ajaxStop(settings)\n    }\n\n    // Empty function, used as default callback\n    function empty() {}\n\n    $.ajaxJSONP = function(options, deferred) {\n        if (!('type' in options)) return $.ajax(options)\n\n        var _callbackName = options.jsonpCallback,\n            callbackName = ($.isFunction(_callbackName) ?\n                _callbackName() : _callbackName) || ('jsonp' + (++jsonpID)),\n            script = document.createElement('script'),\n            originalCallback = window[callbackName],\n            responseData,\n            abort = function(errorType) {\n                $(script).triggerHandler('error', errorType || 'abort')\n            },\n            xhr = { abort: abort },\n            abortTimeout\n\n        if (deferred) deferred.promise(xhr)\n\n        $(script).on('load error', function(e, errorType) {\n            clearTimeout(abortTimeout)\n            $(script).off().remove()\n\n            if (e.type == 'error' || !responseData) {\n                ajaxError(null, errorType || 'error', xhr, options, deferred)\n            } else {\n                ajaxSuccess(responseData[0], xhr, options, deferred)\n            }\n\n            window[callbackName] = originalCallback\n            if (responseData && $.isFunction(originalCallback))\n                originalCallback(responseData[0])\n\n            originalCallback = responseData = undefined\n        })\n\n        if (ajaxBeforeSend(xhr, options) === false) {\n            abort('abort')\n            return xhr\n        }\n\n        window[callbackName] = function() {\n            responseData = arguments\n        }\n\n        script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName)\n        document.head.appendChild(script)\n\n        if (options.timeout > 0) abortTimeout = setTimeout(function() {\n            abort('timeout')\n        }, options.timeout)\n\n        return xhr;\n    }\n\n    $.ajaxSettings = {\n        // Default type of request\n        type: 'GET',\n        // Callback that is executed before request\n        beforeSend: empty,\n        // Callback that is executed if the request succeeds\n        success: empty,\n        // Callback that is executed the the server drops error\n        error: empty,\n        // Callback that is executed on request complete (both: error and success)\n        complete: empty,\n        // The context for the callbacks\n        context: null,\n        // Whether to trigger \"global\" Ajax events\n        global: true,\n        // Transport\n        xhr: function() {\n            return new window.XMLHttpRequest()\n        },\n        // MIME types mapping\n        // IIS returns Javascript as \"application/x-javascript\"\n        accepts: {\n            script: 'text/javascript, application/javascript, application/x-javascript',\n            json: jsonType,\n            xml: 'application/xml, text/xml',\n            html: htmlType,\n            text: 'text/plain'\n        },\n        // Whether the request is to another domain\n        crossDomain: false,\n        // Default timeout\n        timeout: 0,\n        // Whether data should be serialized to string\n        processData: true,\n        // Whether the browser should be allowed to cache GET responses\n        cache: true\n    }\n\n    function mimeToDataType(mime) {\n        if (mime) mime = mime.split(';', 2)[0]\n        return mime && (mime == htmlType ? 'html' :\n            mime == jsonType ? 'json' :\n            scriptTypeRE.test(mime) ? 'script' :\n            xmlTypeRE.test(mime) && 'xml') || 'text'\n    }\n\n    function appendQuery(url, query) {\n        if (query == '') return url\n        return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n    }\n\n    // serialize payload and append it to the URL for GET requests\n    function serializeData(options) {\n        if (options.processData && options.data && $.type(options.data) != \"string\")\n            options.data = $.param(options.data, options.traditional)\n        if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\n            options.url = appendQuery(options.url, options.data), options.data = undefined\n    }\n\n    $.ajax = function(options) {\n        var settings = $.extend({}, options || {}),\n            deferred = $.Deferred && $.Deferred(),\n            urlAnchor\n        for (key in $.ajaxSettings)\n            if (settings[key] === undefined) settings[key] = $.ajaxSettings[key]\n\n        ajaxStart(settings)\n\n        if (!settings.crossDomain) {\n            urlAnchor = document.createElement('a')\n            urlAnchor.href = settings.url\n            urlAnchor.href = urlAnchor.href\n            settings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host)\n        }\n\n        if (!settings.url) settings.url = window.location.toString()\n        serializeData(settings)\n\n        var dataType = settings.dataType,\n            hasPlaceholder = /\\?.+=\\?/.test(settings.url)\n        if (hasPlaceholder) dataType = 'jsonp'\n\n        if (settings.cache === false || (\n                (!options || options.cache !== true) &&\n                ('script' == dataType || 'jsonp' == dataType)\n            ))\n            settings.url = appendQuery(settings.url, '_=' + Date.now())\n\n        if ('jsonp' == dataType) {\n            if (!hasPlaceholder)\n                settings.url = appendQuery(settings.url,\n                    settings.jsonp ? (settings.jsonp + '=?') : settings.jsonp === false ? '' : 'callback=?')\n            return $.ajaxJSONP(settings, deferred)\n        }\n\n        var mime = settings.accepts[dataType],\n            headers = {},\n            setHeader = function(name, value) { headers[name.toLowerCase()] = [name, value] },\n            protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n            xhr = settings.xhr(),\n            nativeSetHeader = xhr.setRequestHeader,\n            abortTimeout\n\n        if (deferred) deferred.promise(xhr)\n\n        if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest')\n        setHeader('Accept', mime || '*/*')\n        if (mime = settings.mimeType || mime) {\n            if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n            xhr.overrideMimeType && xhr.overrideMimeType(mime)\n        }\n        if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET'))\n            setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded')\n\n        if (settings.headers)\n            for (name in settings.headers) setHeader(name, settings.headers[name])\n        xhr.setRequestHeader = setHeader\n\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4) {\n                xhr.onreadystatechange = empty\n                clearTimeout(abortTimeout)\n                var result, error = false\n                if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n                    dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'))\n                    result = xhr.responseText\n\n                    try {\n                        // http://perfectionkills.com/global-eval-what-are-the-options/\n                        if (dataType == 'script')(1, eval)(result)\n                        else if (dataType == 'xml') result = xhr.responseXML\n                        else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result)\n                    } catch (e) { error = e }\n\n                    if (error) ajaxError(error, 'parsererror', xhr, settings, deferred)\n                    else ajaxSuccess(result, xhr, settings, deferred)\n                } else {\n                    ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred)\n                }\n            }\n        }\n\n        if (ajaxBeforeSend(xhr, settings) === false) {\n            xhr.abort()\n            ajaxError(null, 'abort', xhr, settings, deferred)\n            return xhr\n        }\n\n        if (settings.xhrFields)\n            for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name]\n\n        var async = 'async' in settings ? settings.async : true\n        xhr.open(settings.type, settings.url, async, settings.username, settings.password)\n\n        for (name in headers) nativeSetHeader.apply(xhr, headers[name])\n\n        if (settings.timeout > 0) abortTimeout = setTimeout(function() {\n            xhr.onreadystatechange = empty\n            xhr.abort()\n            ajaxError(null, 'timeout', xhr, settings, deferred)\n        }, settings.timeout)\n\n        // avoid sending empty string (#319)\n        xhr.send(settings.data ? settings.data : null)\n        return xhr\n    }\n\n    // handle optional data/success arguments\n    function parseArguments(url, data, success, dataType) {\n        if ($.isFunction(data)) dataType = success, success = data, data = undefined\n        if (!$.isFunction(success)) dataType = success, success = undefined\n        return {\n            url: url,\n            data: data,\n            success: success,\n            dataType: dataType\n        }\n    }\n\n    $.get = function( /* url, data, success, dataType */ ) {\n        return $.ajax(parseArguments.apply(null, arguments))\n    }\n\n    $.post = function( /* url, data, success, dataType */ ) {\n        var options = parseArguments.apply(null, arguments)\n        options.type = 'POST'\n        return $.ajax(options)\n    }\n\n    $.getJSON = function( /* url, data, success */ ) {\n        var options = parseArguments.apply(null, arguments)\n        options.dataType = 'json'\n        return $.ajax(options)\n    }\n\n    $.fn.load = function(url, data, success) {\n        if (!this.length) return this\n        var self = this,\n            parts = url.split(/\\s/),\n            selector,\n            options = parseArguments(url, data, success),\n            callback = options.success\n        if (parts.length > 1) options.url = parts[0], selector = parts[1]\n        options.success = function(response) {\n            self.html(selector ?\n                $('<div>').html(response.replace(rscript, \"\")).find(selector) : response)\n            callback && callback.apply(self, arguments)\n        }\n        $.ajax(options)\n        return this\n    }\n\n    var escape = encodeURIComponent\n\n    function serialize(params, obj, traditional, scope) {\n        var type, array = $.isArray(obj),\n            hash = $.isPlainObject(obj)\n        $.each(obj, function(key, value) {\n            type = $.type(value)\n            if (scope) key = traditional ? scope :\n                scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'\n            // handle data in serializeArray() format\n            if (!scope && array) params.add(value.name, value.value)\n            // recurse into nested objects\n            else if (type == \"array\" || (!traditional && type == \"object\"))\n                serialize(params, value, traditional, key)\n            else params.add(key, value)\n        })\n    }\n\n    $.param = function(obj, traditional) {\n        var params = []\n        params.add = function(key, value) {\n            if ($.isFunction(value)) value = value()\n            if (value == null) value = \"\"\n            this.push(escape(key) + '=' + escape(value))\n        }\n        serialize(params, obj, traditional)\n        return params.join('&').replace(/%20/g, '+')\n    };\n\n    var\n        /* Prefilters\n         * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n         * 2) These are called:\n         *    - BEFORE asking for a transport\n         *    - AFTER param serialization (s.data is a string if s.processData is true)\n         * 3) key is the dataType\n         * 4) the catchall symbol \"*\" can be used\n         * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n         */\n        prefilters = {},\n\n        /* Transports bindings\n         * 1) key is the dataType\n         * 2) the catchall symbol \"*\" can be used\n         * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n         */\n        transports = {},\n        rnotwhite = (/\\S+/g);\n\n\n    // Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\n    function addToPrefiltersOrTransports(structure) {\n\n        // dataTypeExpression is optional and defaults to \"*\"\n        return function(dataTypeExpression, func) {\n\n            if (typeof dataTypeExpression !== \"string\") {\n                func = dataTypeExpression;\n                dataTypeExpression = \"*\";\n            }\n\n            var dataType,\n                i = 0,\n                dataTypes = dataTypeExpression.toLowerCase().match(rnotwhite) || [];\n\n            if (jQuery.isFunction(func)) {\n\n                // For each dataType in the dataTypeExpression\n                while ((dataType = dataTypes[i++])) {\n\n                    // Prepend if requested\n                    if (dataType[0] === \"+\") {\n                        dataType = dataType.slice(1) || \"*\";\n                        (structure[dataType] = structure[dataType] || []).unshift(func);\n\n                        // Otherwise append\n                    } else {\n                        (structure[dataType] = structure[dataType] || []).push(func);\n                    }\n                }\n            }\n        };\n    }\n\n    $.ajaxPrefilter = addToPrefiltersOrTransports(prefilters);\n    $.ajaxTransport = addToPrefiltersOrTransports(transports);\n\n    // A special extend for ajax options\n    // that takes \"flat\" options (not to be deep extended)\n    // Fixes #9887\n    function ajaxExtend(target, src) {\n        var key, deep,\n            flatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n        for (key in src) {\n            if (src[key] !== undefined) {\n                (flatOptions[key] ? target : (deep || (deep = {})))[key] = src[key];\n            }\n        }\n        if (deep) {\n            jQuery.extend(true, target, deep);\n        }\n\n        return target;\n    }\n\n    // Creates a full fledged settings object into target\n    // with both ajaxSettings and settings fields.\n    // If target is omitted, writes into ajaxSettings.\n    $.ajaxSetup = function(target, settings) {\n        return settings ?\n\n            // Building a settings object\n            ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) :\n\n            // Extending ajaxSettings\n            ajaxExtend(jQuery.ajaxSettings, target);\n    };\n\n    // Base inspection function for prefilters and transports\n    function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {\n\n        var inspected = {},\n            seekingTransport = (structure === transports);\n\n        function inspect(dataType) {\n            var selected;\n            inspected[dataType] = true;\n            jQuery.each(structure[dataType] || [], function(_, prefilterOrFactory) {\n                var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);\n                if (typeof dataTypeOrTransport === \"string\" &&\n                    !seekingTransport && !inspected[dataTypeOrTransport]) {\n\n                    options.dataTypes.unshift(dataTypeOrTransport);\n                    inspect(dataTypeOrTransport);\n                    return false;\n                } else if (seekingTransport) {\n                    return !(selected = dataTypeOrTransport);\n                }\n            });\n            return selected;\n        }\n\n        return inspect(options.dataTypes[0]) || !inspected[\"*\"] && inspect(\"*\");\n    }\n\n    return $;\n\n});\n"]}