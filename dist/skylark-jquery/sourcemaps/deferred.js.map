{"version":3,"sources":["deferred.js"],"names":["define","$","langx","Deferred","prototype","notify","progress","d","ret","promise","forEach","name","bind","when","p","all","makeArray","arguments","originThen","then","onResolved","onRejected","call","results","map","result","apply"],"mappings":";;;;;;;AAAAA,QACI,SACA,uBACD,SAASC,EAAEC,GAkCV,OAhCAA,EAAMC,SAASC,UAAUC,OAASH,EAAMC,SAASC,UAAUE,SAE3DL,EAAEE,SAAW,WACT,IAAII,EAAI,IAAIL,EAAMC,SACdK,GACIC,QAAU,WACN,OAAOF,EAAEE,UAQrB,OAJC,UAAU,cAAc,SAAS,aAAa,SAAS,OAAO,OAAO,OAAO,YAAYC,QAAQ,SAASC,GACtGH,EAAIG,GAAQJ,EAAEI,GAAMC,KAAKL,KAGtBC,GAGXP,EAAEY,KAAO,WACL,IAAIC,EAAIZ,EAAMC,SAASY,IAAIb,EAAMc,UAAUC,YACvCC,EAAaJ,EAAEK,KAUnB,OATAL,EAAEK,KAAO,SAASC,EAAWC,GAOzB,OAAOH,EAAWI,KAAKR,EANT,SAASS,GAInB,OAHAA,EAAUA,EAAQC,IAAI,SAASC,GAC3B,OAAQA,KAELL,GAAcA,EAAWM,MAAM,KAAKH,IAEdF,IAE9BP,GAGJb","file":"../deferred.js","sourcesContent":["define([\r\n    \"./core\",\r\n    \"skylark-langx/langx\"\r\n], function($,langx) {\r\n\r\n    langx.Deferred.prototype.notify = langx.Deferred.prototype.progress;\r\n\r\n    $.Deferred = function() {\r\n        var d = new langx.Deferred(),\r\n            ret = {\r\n                promise : function() {\r\n                    return d.promise;\r\n                }\r\n            };\r\n\r\n        [\"resolve\",\"resolveWith\",\"reject\",\"rejectWith\",\"notify\",\"then\",\"done\",\"fail\",\"progress\"].forEach(function(name){\r\n            ret[name] = d[name].bind(d);\r\n        });\r\n\r\n        return ret;\r\n    };\r\n    \r\n    $.when = function(){\r\n        var p = langx.Deferred.all(langx.makeArray(arguments)),\r\n            originThen = p.then;\r\n        p.then = function(onResolved,onRejected) {\r\n            var handler = function(results) {\r\n                results = results.map(function(result){\r\n                    return [result];\r\n                });\r\n                return onResolved && onResolved.apply(null,results);\r\n            };\r\n            return originThen.call(p,handler,onRejected);\r\n        };\r\n        return p;\r\n    };\r\n\r\n    return $;\r\n\r\n});\r\n"]}