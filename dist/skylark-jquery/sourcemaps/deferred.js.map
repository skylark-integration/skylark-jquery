{"version":3,"sources":["deferred.js"],"names":["define","$","langx","Deferred","d","_p","promise","when","p","all","makeArray","arguments","originThen","then","onResolved","onRejected","handler","results","map","result","apply","call"],"mappings":";;;;;;;AAAAA,QACI,SACA,uBACD,SAASC,EAAEC,GA0BV,MAxBAD,GAAEE,SAAW,WACT,GAAIC,GAAI,GAAIF,GAAMC,SACdE,EAAKD,EAAEE,OAIX,OAHAF,GAAEE,QAAU,WACR,MAAOD,IAEJD,GAGXH,EAAEM,KAAO,WACL,GAAIC,GAAIN,EAAMC,SAASM,IAAIP,EAAMQ,UAAUC,YACvCC,EAAaJ,EAAEK,IAUnB,OATAL,GAAEK,KAAO,SAASC,EAAWC,GACzB,GAAIC,GAAU,SAASC,GAInB,MAHAA,GAAUA,EAAQC,IAAI,SAASC,GAC3B,OAAQA,KAELL,GAAcA,EAAWM,MAAM,KAAKH,GAE/C,OAAOL,GAAWS,KAAKb,EAAEQ,EAAQD,IAE9BP,GAGJP","file":"../deferred.js","sourcesContent":["define([\r\n    \"./core\",\r\n    \"skylark-langx/langx\"\r\n], function($,langx) {\r\n\r\n    $.Deferred = function() {\r\n        var d = new langx.Deferred(),\r\n            _p = d.promise;\r\n        d.promise = function() {\r\n            return _p;\r\n        }\r\n        return d;\r\n    };\r\n\r\n    $.when = function(){\r\n        var p = langx.Deferred.all(langx.makeArray(arguments)),\r\n            originThen = p.then;\r\n        p.then = function(onResolved,onRejected) {\r\n            var handler = function(results) {\r\n                results = results.map(function(result){\r\n                    return [result];\r\n                });\r\n                return onResolved && onResolved.apply(null,results);\r\n            };\r\n            return originThen.call(p,handler,onRejected);\r\n        };\r\n        return p;\r\n    };\r\n\r\n    return $;\r\n\r\n});\r\n"]}