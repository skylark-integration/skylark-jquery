{"version":3,"sources":["query.js"],"names":["define","skylark","langx","async","noder","datax","eventer","finder","geom","styler","fx","wrapper_map","func","context","self","this","params","slice","call","arguments","result","$","map","elem","idx","apply","concat","uniq","wrapper_selector","last","selector","filter","wrapper_every_act","each","wrapper_every_act_firstArgFunc","oldValueFunc","arg1","forEach","funcArg","wrapper_some_chk","some","wrapper_name_value","name","value","isPlainObject","isDefined","newValue","wrapper_value","isQ","Array","prototype","push","every","rquickExpr","isArrayLike","isString","isFunction","type","isArray","isDocument","isWindow","isObject","NodeList","compact","flatten","camelCase","dasherize","children","klass","klassName","init","match","nodes","node","props","doc","charAt","length","exec","createFragment","byId","ownerDoc","descendants","attr","query","wrapper_node_operation","html","argType","arg","object","ready","find","fn","mixin","el","i","get","undefined","toArray","size","remove","callback","not","element","matches","add","is","excludes","item","indexOf","has","contains","eq","first","closest","collection","parentNode","parents","ancestors","parent","contents","siblings","empty","pluck","property","show","replaceWith","newContent","before","wrap","structure","dom","clone","index","wrapAll","cloneNode","wrappingElement","append","wrapInner","unwrap","document","createTextNode","childNodes","textContent","hide","toggle","setting","css","prev","next","text","removeAttr","prop","data","removeData","val","offset","pageRect","style","hasClass","addClass","className","removeClass","toggleClass","scrollTop","scrollLeft","position","relativePosition","offsetParent","detach","width","height","dimension","Dimension","replace","m","toUpperCase","margin","cb","me","marginExtents","left","right","top","bottom","mb","innerWidth","innerHeight","traverse","after","prepend","insertAfter","insertBefore","appendTo","prependTo","on","off","trigger","split","event","one","animate","toogle","fadeTo","fadeIn","fadeOut","fadeToggle","end","prevObject","andSelf","ret","place","refNode","descendant","addContent","content","template","substitute","replaceClass","newClass","oldClass"],"mappings":"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","file":"../query.js","sourcesContent":["define([\r\n    \"./skylark\",\r\n    \"./langx\",\r\n    \"./async\",\r\n    \"./noder\",\r\n    \"./datax\",\r\n    \"./eventer\",\r\n    \"./finder\",\r\n    \"./geom\",\r\n    \"./styler\",\r\n    \"./fx\"\r\n], function(skylark, langx, async, noder, datax, eventer, finder, geom, styler, fx) {\r\n    var some = Array.prototype.some,\r\n        push = Array.prototype.push,\r\n        every = Array.prototype.every,\r\n        concat = Array.prototype.concat,\r\n        slice = Array.prototype.slice,\r\n        map = Array.prototype.map,\r\n        filter = Array.prototype.filter,\r\n        forEach = Array.prototype.forEach,\r\n        isQ;\r\n\r\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\r\n\r\n    var funcArg = langx.funcArg,\r\n        isArrayLike = langx.isArrayLike,\r\n        isString = langx.isString,\r\n        uniq = langx.uniq,\r\n        isFunction = langx.isFunction;\r\n\r\n    var type = langx.type,\r\n        isArray = langx.isArray,\r\n\r\n        isWindow = langx.isWindow,\r\n\r\n        isDocument = langx.isDocument,\r\n\r\n        isObject = langx.isObject,\r\n\r\n        isPlainObject = langx.isPlainObject,\r\n\r\n        compact = langx.compact,\r\n\r\n        flatten = langx.flatten,\r\n\r\n        camelCase = langx.camelCase,\r\n\r\n        dasherize = langx.dasherize,\r\n        children = finder.children;\r\n\r\n    function wrapper_map(func, context) {\r\n        return function() {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            var result = $.map(self, function(elem, idx) {\r\n                return func.apply(context, [elem].concat(params));\r\n            });\r\n            return $(uniq(result));\r\n        }\r\n    }\r\n\r\n    function wrapper_selector(func, context, last) {\r\n        return function(selector) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            var result = this.map(function(idx, elem) {\r\n                return func.apply(context, last ? [elem] : [elem, selector]);\r\n            });\r\n            if (last && selector) {\r\n                return result.filter(selector);\r\n            } else {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    function wrapper_every_act(func, context) {\r\n        return function() {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            this.each(function(idx) {\r\n                func.apply(context, [this].concat(params));\r\n            });\r\n            return self;\r\n        }\r\n    }\r\n\r\n    function wrapper_every_act_firstArgFunc(func, context, oldValueFunc) {\r\n        return function(arg1) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            forEach.call(self, function(elem, idx) {\r\n                var newArg1 = funcArg(elem, arg1, idx, oldValueFunc(elem));\r\n                func.apply(context, [elem, arg1].concat(params.slice(1)));\r\n            });\r\n            return self;\r\n        }\r\n    }\r\n\r\n    function wrapper_some_chk(func, context) {\r\n        return function() {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            return some.call(self, function(elem) {\r\n                return func.apply(context, [elem].concat(params));\r\n            });\r\n        }\r\n    }\r\n\r\n    function wrapper_name_value(func, context, oldValueFunc) {\r\n        return function(name, value) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n\r\n            if (langx.isPlainObject(name) || langx.isDefined(value)) {\r\n                forEach.call(self, function(elem, idx) {\r\n                    var newValue;\r\n                    if (oldValueFunc) {\r\n                        newValue = funcArg(elem, value, idx, oldValueFunc(elem));\r\n                    } else {\r\n                        newValue = value\r\n                    }\r\n                    func.apply(context, [elem].concat(params));\r\n                });\r\n                return self;\r\n            } else {\r\n                if (self[0]) {\r\n                    return func.apply(context, [self[0], name]);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    function wrapper_value(func, context, oldValueFunc) {\r\n        return function(value) {\r\n            var self = this;\r\n\r\n            if (langx.isDefined(value)) {\r\n                forEach.call(self, function(elem, idx) {\r\n                    var newValue;\r\n                    if (oldValueFunc) {\r\n                        newValue = funcArg(elem, value, idx, oldValueFunc(elem));\r\n                    } else {\r\n                        newValue = value\r\n                    }\r\n                    func.apply(context, [elem, newValue]);\r\n                });\r\n                return self;\r\n            } else {\r\n                if (self[0]) {\r\n                    return func.apply(context, [self[0]]);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    var NodeList = langx.klass({\r\n        klassName: \"SkNodeList\",\r\n        init: function(selector, context) {\r\n            var self = this,\r\n                match, nodes, node, props;\r\n\r\n            if (selector) {\r\n                self.context = context = context || noder.doc();\r\n\r\n                if (isString(selector)) {\r\n                    // a html string or a css selector is expected\r\n                    self.selector = selector;\r\n\r\n                    if (selector.charAt(0) === \"<\" && selector.charAt(selector.length - 1) === \">\" && selector.length >= 3) {\r\n                        match = [null, selector, null];\r\n                    } else {\r\n                        match = rquickExpr.exec(selector);\r\n                    }\r\n\r\n                    if (match) {\r\n                        if (match[1]) {\r\n                            // if selector is html\r\n                            nodes = noder.createFragment(selector);\r\n\r\n                            if (langx.isPlainObject(context)) {\r\n                                props = context;\r\n                            }\r\n\r\n                        } else {\r\n                            node = finder.byId(match[2], noder.ownerDoc(context));\r\n\r\n                            if (node) {\r\n                                // if selector is id\r\n                                nodes = [node];\r\n                            }\r\n\r\n                        }\r\n                    } else {\r\n                        // if selector is css selector\r\n                        nodes = finder.descendants(context, selector);\r\n                    }\r\n                } else {\r\n                    if (isArray(selector)) {\r\n                        // a dom node array is expected\r\n                        nodes = selector;\r\n                    } else {\r\n                        // a dom node is expected\r\n                        nodes = [selector];\r\n                    }\r\n                    //self.add(selector, false);\r\n                }\r\n            }\r\n\r\n\r\n            if (nodes) {\r\n                push.apply(self, nodes);\r\n\r\n                if (props) {\r\n                    self.attr(props);\r\n                }\r\n            }\r\n\r\n            return self;\r\n        }\r\n    }, Array);\r\n\r\n    var query = (function() {\r\n        isQ = function(object) {\r\n            return object instanceof NodeList;\r\n        }\r\n        init = function(selector, context) {\r\n            return new NodeList(selector, context);\r\n        }\r\n\r\n        var $ = function(selector, context) {\r\n            if (isFunction(selector)) {\r\n                eventer.ready(function() {\r\n                    selector($);\r\n                });\r\n            } else if (isQ(selector)) {\r\n                return selector;\r\n            } else {\r\n                if (context && isQ(context) && isString(selector)) {\r\n                    return context.find(selector);\r\n                }\r\n                return init(selector, context);\r\n            }\r\n        };\r\n\r\n        $.fn = NodeList.prototype;\r\n        langx.mixin($.fn, {\r\n            // `map` and `slice` in the jQuery API work differently\r\n            // from their array counterparts\r\n\r\n            map: function(fn) {\r\n                return $(langx.map(this, function(el, i) {\r\n                    return fn.call(el, i, el)\r\n                }))\r\n            },\r\n\r\n            slice: function() { \r\n                return $(slice.apply(this, arguments))\r\n            },\r\n\r\n            get: function(idx) {\r\n                return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\r\n            },\r\n\r\n            toArray: function() {\r\n                return slice.call(this);\r\n            },\r\n\r\n            size: function() {\r\n                return this.length\r\n            },\r\n\r\n            remove: wrapper_every_act(noder.remove, noder),\r\n\r\n            each: function(callback) {\r\n                langx.each(this, callback);\r\n                return this;\r\n            },\r\n\r\n            filter: function(selector) {\r\n                if (isFunction(selector)) return this.not(this.not(selector))\r\n                return $(filter.call(this, function(element) {\r\n                    return finder.matches(element, selector)\r\n                }))\r\n            },\r\n\r\n            add: function(selector, context) {\r\n                return $(uniq(this.concat($(selector, context))))\r\n            },\r\n\r\n            is: function(selector) {\r\n                return this.length > 0 && finder.matches(this[0], selector)\r\n            },\r\n\r\n            not: function(selector) {\r\n                var nodes = []\r\n                if (isFunction(selector) && selector.call !== undefined)\r\n                    this.each(function(idx) {\r\n                        if (!selector.call(this, idx)) nodes.push(this)\r\n                    })\r\n                else {\r\n                    var excludes = typeof selector == 'string' ? this.filter(selector) :\r\n                        (isArrayLike(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)\r\n                    this.forEach(function(el) {\r\n                        if (excludes.indexOf(el) < 0) nodes.push(el)\r\n                    })\r\n                }\r\n                return $(nodes)\r\n            },\r\n\r\n            has: function(selector) {\r\n                return this.filter(function() {\r\n                    return isObject(selector) ?\r\n                        noder.contains(this, selector) :\r\n                        $(this).find(selector).size()\r\n                })\r\n            },\r\n\r\n            eq: function(idx) {\r\n                return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1);\r\n            },\r\n\r\n            first: function() {\r\n                return this.eq(0);\r\n            },\r\n\r\n            last: function() {\r\n                return this.eq(-1);\r\n            },\r\n\r\n            find: wrapper_selector(finder.descendants, finder),\r\n\r\n            closest: function(selector, context) {\r\n                var node = this[0],\r\n                    collection = false\r\n                if (typeof selector == 'object') collection = $(selector)\r\n                while (node && !(collection ? collection.indexOf(node) >= 0 : finder.matches(node, selector)))\r\n                    node = node !== context && !isDocument(node) && node.parentNode\r\n                return $(node)\r\n            },\r\n\r\n\r\n            parents: wrapper_selector(finder.ancestors, finder),\r\n\r\n            parent: wrapper_selector(finder.parent, finder),\r\n\r\n            children: wrapper_selector(finder.children, finder),\r\n\r\n            contents: wrapper_map(noder.contents, noder),\r\n\r\n            siblings: wrapper_selector(finder.siblings, finder),\r\n\r\n            empty: wrapper_every_act(noder.empty, noder),\r\n\r\n            // `pluck` is borrowed from Prototype.js\r\n            pluck: function(property) {\r\n                return langx.map(this, function(el) {\r\n                    return el[property]\r\n                })\r\n            },\r\n\r\n            show: wrapper_every_act(fx.show, fx),\r\n\r\n            replaceWith: function(newContent) {\r\n                return this.before(newContent).remove();\r\n            },\r\n\r\n            wrap: function(structure) {\r\n                var func = isFunction(structure)\r\n                if (this[0] && !func)\r\n                    var dom = $(structure).get(0),\r\n                        clone = dom.parentNode || this.length > 1\r\n\r\n                return this.each(function(index) {\r\n                    $(this).wrapAll(\r\n                        func ? structure.call(this, index) :\r\n                        clone ? dom.cloneNode(true) : dom\r\n                    )\r\n                })\r\n            },\r\n\r\n            wrapAll: function(wrappingElement) {\r\n                if (this[0]) {\r\n                    $(this[0]).before(wrappingElement = $(wrappingElement));\r\n                    var children;\r\n                    // drill down to the inmost element\r\n                    while ((children = wrappingElement.children()).length) {\r\n                        wrappingElement = children.first();\r\n                    }\r\n                    $(wrappingElement).append(this);\r\n                }\r\n                return this\r\n            },\r\n\r\n            wrapInner: function(wrappingElement) {\r\n                var func = isFunction(wrappingElement)\r\n                return this.each(function(index) {\r\n                    var self = $(this),\r\n                        contents = self.contents(),\r\n                        dom = func ? wrappingElement.call(this, index) : wrappingElement\r\n                    contents.length ? contents.wrapAll(dom) : self.append(dom)\r\n                })\r\n            },\r\n\r\n            unwrap: function(selector) {\r\n                if (this.parent().children().length === 0) {\r\n                    // remove dom without text\r\n                    this.parent(selector).not(\"body\").each(function() {\r\n                        $(this).replaceWith(document.createTextNode(this.childNodes[0].textContent));\r\n                    });\r\n                } else {\r\n                    this.parent().each(function() {\r\n                        $(this).replaceWith($(this).children())\r\n                    });\r\n                }\r\n                return this\r\n            },\r\n\r\n            clone: function() {\r\n                return this.map(function() {\r\n                    return this.cloneNode(true)\r\n                })\r\n            },\r\n\r\n            hide: wrapper_every_act(fx.hide, fx),\r\n\r\n            toggle: function(setting) {\r\n                return this.each(function() {\r\n                    var el = $(this);\r\n                    (setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide()\r\n                })\r\n            },\r\n\r\n            prev: function(selector) {\r\n                return $(this.pluck('previousElementSibling')).filter(selector || '*')\r\n            },\r\n\r\n            next: function(selector) {\r\n                return $(this.pluck('nextElementSibling')).filter(selector || '*')\r\n            },\r\n\r\n            html: wrapper_value(noder.html, noder, noder.html),\r\n\r\n            text: wrapper_value(datax.text, datax, datax.text),\r\n\r\n            attr: wrapper_name_value(datax.attr, datax, datax.attr),\r\n\r\n            removeAttr: wrapper_every_act(datax.removeAttr, datax),\r\n\r\n            prop: wrapper_name_value(datax.prop, datax, datax.prop),\r\n\r\n            data: wrapper_name_value(datax.data, datax, datax.data),\r\n\r\n            removeData: wrapper_every_act(datax.removeData, datax),\r\n\r\n            val: wrapper_value(datax.val, datax, datax.val),\r\n\r\n            offset: wrapper_value(geom.pageRect, geom, geom.pageRect),\r\n\r\n            style: wrapper_name_value(styler.css, styler),\r\n\r\n            css: wrapper_name_value(styler.css, styler),\r\n\r\n            index: function(elem) {\r\n                if (elem) {\r\n                    return this.indexOf($(elem)[0]);\r\n                } else {\r\n                    return this.parent().children().indexOf(this[0]);\r\n                }\r\n            },\r\n\r\n            //hasClass(name)\r\n            hasClass: wrapper_some_chk(styler.hasClass, styler),\r\n\r\n            //addClass(name)\r\n            addClass: wrapper_every_act_firstArgFunc(styler.addClass, styler, styler.className),\r\n\r\n            //removeClass(name)\r\n            removeClass: wrapper_every_act_firstArgFunc(styler.removeClass, styler, styler.className),\r\n\r\n            //toogleClass(name,when)\r\n            toggleClass: wrapper_every_act_firstArgFunc(styler.toggleClass, styler, styler.className),\r\n\r\n            scrollTop: wrapper_value(geom.scrollTop, geom),\r\n\r\n            scrollLeft: wrapper_value(geom.scrollLeft, geom),\r\n\r\n            position: function() {\r\n                if (!this.length) return\r\n\r\n                var elem = this[0];\r\n\r\n                return geom.relativePosition(elem);\r\n            },\r\n\r\n            offsetParent: wrapper_map(geom.offsetParent, geom),\r\n        });\r\n\r\n        // for now\r\n        $.fn.detach = $.fn.remove;\r\n\r\n\r\n        $.fn.size = wrapper_value(geom.size, geom);\r\n\r\n        $.fn.width = wrapper_value(geom.width, geom, geom.width);\r\n\r\n        $.fn.height = wrapper_value(geom.height, geom, geom.height);\r\n\r\n        ['width', 'height'].forEach(function(dimension) {\r\n            var offset, Dimension = dimension.replace(/./, function(m) {\r\n                return m[0].toUpperCase()\r\n            });\r\n\r\n            $.fn['outer' + Dimension] = function(margin, value) {\r\n                if (arguments.length) {\r\n                    if (typeof margin !== 'boolean') {\r\n                        value = margin;\r\n                        margin = false;\r\n                    }\r\n                } else {\r\n                    margin = false;\r\n                    value = undefined;\r\n                }\r\n\r\n                if (value === undefined) {\r\n                    var el = this[0];\r\n                    var cb = geom.size(el);\r\n                    if (margin) {\r\n                        var me = geom.marginExtents(el);\r\n                        cb.width = cb.width + me.left + me.right;\r\n                        cb.height = cb.height + me.top + me.bottom;\r\n                    }\r\n                    return dimension === \"width\" ? cb.width : cb.height;\r\n                } else {\r\n                    return this.each(function(idx, el) {\r\n                        var mb = {};\r\n                        var me = geom.marginExtents(el);\r\n                        if (dimension === \"width\") {\r\n                            mb.width = value;\r\n                            if (margin) {\r\n                                mb.width = mb.width - me.left - me.right\r\n                            }\r\n                        } else {\r\n                            mb.height = value;\r\n                            if (margin) {\r\n                                mb.height = mb.height - me.top - me.bottom;\r\n                            }\r\n                        }\r\n                        geom.size(el, mb);\r\n                    })\r\n\r\n                }\r\n            };\r\n        })\r\n\r\n        $.fn.innerWidth = wrapper_value(geom.width, geom, geom.width);\r\n\r\n        $.fn.innerHeight = wrapper_value(geom.height, geom, geom.height);\r\n\r\n\r\n        var traverseNode = noder.traverse;\r\n\r\n        function wrapper_node_operation(func, context, oldValueFunc) {\r\n            return function(html) {\r\n                var argType, nodes = langx.map(arguments, function(arg) {\r\n                    argType = type(arg)\r\n                    return argType == \"object\" || argType == \"array\" || arg == null ?\r\n                        arg : noder.createFragment(arg)\r\n                });\r\n                if (nodes.length < 1) {\r\n                    return this\r\n                }\r\n                this.each(function(idx) {\r\n                    func.apply(context, [this, nodes, idx > 0]);\r\n                });\r\n                return this;\r\n            }\r\n        }\r\n\r\n\r\n        $.fn.after = wrapper_node_operation(noder.after, noder);\r\n\r\n        $.fn.prepend = wrapper_node_operation(noder.prepend, noder);\r\n\r\n        $.fn.before = wrapper_node_operation(noder.before, noder);\r\n\r\n        $.fn.append = wrapper_node_operation(noder.append, noder);\r\n\r\n        $.fn.insertAfter = function(html) {\r\n            $(html).after(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.insertBefore = function(html) {\r\n            $(html).before(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.appendTo = function(html) {\r\n            $(html).append(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.prependTo = function(html) {\r\n            $(html).prepend(this);\r\n            return this;\r\n        };\r\n\r\n        return $\r\n    })();\r\n\r\n    (function($) {\r\n        $.fn.on = wrapper_every_act(eventer.on, eventer);\r\n\r\n        $.fn.off = wrapper_every_act(eventer.off, eventer);\r\n\r\n        $.fn.trigger = wrapper_every_act(eventer.trigger, eventer);\r\n\r\n\r\n        ('focusin focusout focus blur load resize scroll unload click dblclick ' +\r\n            'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' +\r\n            'change select keydown keypress keyup error').split(' ').forEach(function(event) {\r\n            $.fn[event] = function(data, callback) {\r\n                return (0 in arguments) ?\r\n                    this.on(event, data, callback) :\r\n                    this.trigger(event)\r\n            }\r\n        });\r\n\r\n\r\n        $.fn.one = function(event, selector, data, callback) {\r\n            if (!langx.isString(selector) && !langx.isFunction(callback)) {\r\n                callback = data;\r\n                data = selector;\r\n                selector = null;\r\n            }\r\n\r\n            if (langx.isFunction(data)) {\r\n                callback = data;\r\n                data = null;\r\n            }\r\n\r\n            return this.on(event, selector, data, callback, 1)\r\n        };\r\n\r\n        $.fn.animate = wrapper_every_act(fx.animate, fx);\r\n\r\n        $.fn.show = wrapper_every_act(fx.show, fx);\r\n        $.fn.hide = wrapper_every_act(fx.hide, fx);\r\n        $.fn.toogle = wrapper_every_act(fx.toogle, fx);\r\n        $.fn.fadeTo = wrapper_every_act(fx.fadeTo, fx);\r\n        $.fn.fadeIn = wrapper_every_act(fx.fadeIn, fx);\r\n        $.fn.fadeOut = wrapper_every_act(fx.fadeOut, fx);\r\n        $.fn.fadeToggle = wrapper_every_act(fx.fadeToggle, fx);\r\n    })(query);\r\n\r\n\r\n    (function($) {\r\n        $.fn.end = function() {\r\n            return this.prevObject || $()\r\n        }\r\n\r\n        $.fn.andSelf = function() {\r\n            return this.add(this.prevObject || $())\r\n        }\r\n\r\n        'filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings'.split(',').forEach(function(property) {\r\n            var fn = $.fn[property]\r\n            $.fn[property] = function() {\r\n                var ret = fn.apply(this, arguments)\r\n                ret.prevObject = this\r\n                return ret\r\n            }\r\n        })\r\n    })(query);\r\n\r\n\r\n    (function($) {\r\n        $.fn.query = $.fn.find;\r\n\r\n        $.fn.place = function(refNode, position) {\r\n            // summary:\r\n            //      places elements of this node list relative to the first element matched\r\n            //      by queryOrNode. Returns the original NodeList. See: `dojo/dom-construct.place`\r\n            // queryOrNode:\r\n            //      may be a string representing any valid CSS3 selector or a DOM node.\r\n            //      In the selector case, only the first matching element will be used\r\n            //      for relative positioning.\r\n            // position:\r\n            //      can be one of:\r\n            //\r\n            //      -   \"last\" (default)\r\n            //      -   \"first\"\r\n            //      -   \"before\"\r\n            //      -   \"after\"\r\n            //      -   \"only\"\r\n            //      -   \"replace\"\r\n            //\r\n            //      or an offset in the childNodes\r\n            if (langx.isString(refNode)) {\r\n                refNode = finder.descendant(refNode);\r\n            } else if (isQ(refNode)) {\r\n                refNode = refNode[0];\r\n            }\r\n            return this.each(function(i, node) {\r\n                switch (position) {\r\n                    case \"before\":\r\n                        noder.before(refNode, node);\r\n                        break;\r\n                    case \"after\":\r\n                        noder.after(refNode, node);\r\n                        break;\r\n                    case \"replace\":\r\n                        noder.replace(refNode, node);\r\n                        break;\r\n                    case \"only\":\r\n                        noder.empty(refNode);\r\n                        noder.append(refNode, node);\r\n                        break;\r\n                    case \"first\":\r\n                        noder.prepend(refNode, node);\r\n                        break;\r\n                        // else fallthrough...\r\n                    default: // aka: last\r\n                        noder.append(refNode, node);\r\n                }\r\n            });\r\n        };\r\n\r\n        $.fn.addContent = function(content, position) {\r\n            if (content.template) {\r\n                content = langx.substitute(content.template, content);\r\n            }\r\n            return this.append(content);\r\n        };\r\n\r\n        $.fn.replaceClass = function(newClass, oldClass) {\r\n            this.removeClass(oldClass);\r\n            this.addClass(newClass);\r\n            return this;\r\n        };\r\n\r\n    })(query);\r\n\r\n\r\n    return skylark.query = query;\r\n});"]}